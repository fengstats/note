## Docker Hub é•œåƒåŠ é€Ÿé…ç½®

[å›½å†…æ•™è‚²æœºæ„ä¸å„å¤§äº‘æœåŠ¡å•†æä¾›çš„é•œåƒåŠ é€ŸæœåŠ¡](https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6) - æ¨èæµ·äº¤å¤§é•œåƒç«™ï¼Œç½‘é€Ÿè¿˜è¡Œçš„æƒ…å†µä¸‹ï¼Œæ‹‰å– mysql:8.0 é•œåƒåªç”¨äº† 31sï¼Œå¤§çº¦ 600MB å·¦å³ï¼Œä¸è¡Œçš„è¯å†è¯•è¯•å…¶ä»–çš„ã€‚

```json
"registry-mirrors": [
  "https://docker.mirrors.sjtug.sjtu.edu.cn"
]
```

## FFmpeg - Homebrew

ä¸€ä¸ªå®Œæ•´çš„è·¨å¹³å°è§£å†³æ–¹æ¡ˆï¼Œç”¨äºå½•åˆ¶ã€è½¬æ¢å’Œæµå¼ä¼ è¾“éŸ³é¢‘å’Œè§†é¢‘ï¼ŒåŠŸèƒ½è¶…çº§å¼ºå¤§ã€‚

> ç›´æ¥ç”¨ Homebrew è£…ï¼Œé‡åˆ°é—®é¢˜è§£å†³é—®é¢˜ï¼Œè‚¯å®šæ˜¯èƒ½è£…ä¸‹æ¥çš„ã€‚

```shell
brew install ffmpeg
```

## SRS - Docker

### æ‹‰é•œåƒ

```shell
docker pull registry.cn-hangzhou.aliyuncs.com/ossrs/srs:5
```

### å¯åŠ¨æœåŠ¡

- [8080](http://localhost:8080/) æ˜¯ Web ç«¯å£ï¼Œå¯ä»¥ç›´æ¥è®¿é—®æŸ¥çœ‹ã€‚
- `$(ifconfig en0 inet | grep 'inet ' | awk '{print $2}')`: è¿™ä¸ªå‘½ä»¤å¯ä»¥è·å–æœ¬åœ°ç½‘ç»œ IP åœ°å€ï¼Œ`en0` ä¸€èˆ¬æ˜¯ç½‘ç»œè¿æ¥ï¼ˆWIFIï¼‰ï¼Œ`en6` ä¸€èˆ¬æ˜¯ç½‘çº¿è¿æ¥ï¼Œåœ¨ä¸‹é¢çš„ `CANDIDATE` å°±å…ˆå†™æ­»äº†ï¼Œè¿™ä¸ªå‚æ•°åé¢è¿æ¥ WebRTC æ—¶æœ‰ç”¨ï¼Œéœ€è¦æ”¹æˆä½ è‡ªå·±çš„ IP åœ°å€ã€‚

#### Docker Volume Driver

- æœ¬è´¨ä¸Šæ˜¯ Docker Host æ–‡ä»¶ç³»ç»Ÿé‡Œé¢çš„ç›®å½•æˆ–æ–‡ä»¶ï¼Œä¸æ˜¯å¤–éƒ¨ç£ç›˜ï¼Œå®¹å™¨å¯ä»¥ç›´æ¥è¯»å†™ Volume ä¸­çš„æ•°æ®ï¼Œå³ä½¿ä½¿ç”¨å®ƒçš„å®¹å™¨è¢«é”€æ¯ï¼ŒVolume ä¸­æ•°æ®ä¹Ÿä¼šè¢«ä¿å­˜ã€‚
- `./objs/srs -c conf/rtc2rtmp.conf`: è¿™æ˜¯åœ¨ Docker å®¹å™¨å†…å®¹æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯¹åº”ç›®å½•ä½ç½®æ˜¯ `/usr/local/srs`ï¼Œæ‰€ä»¥è¿™æ‰æ˜¯çœŸæ­£çš„é€‰æ‹©é…ç½®æ–‡ä»¶å¯åŠ¨ SRS æœåŠ¡ã€‚

```shell
CANDIDATE="192.168.1.3"
docker run -d \
--name billd-live-class-srs \
--env CANDIDATE=$CANDIDATE \
-p 8080:8080 -p 1935:1935 -p 1985:1985 -p 8000:8000/udp \
-v srs_conf:/usr/local/srs/conf \
-v srs_objs:/usr/local/srs/objs \
registry.cn-hangzhou.aliyuncs.com/ossrs/srs:5 \
./objs/srs -c conf/rtc2rtmp.conf
```

#### æœ¬åœ°ç£ç›˜ç›®å½•æŒ‚è½½

> [!todo] çƒ¦ï¼Œä¸€ç›´æœ‰é—®é¢˜ï¼Œæš‚æ—¶è¿˜æ˜¯ç”¨ä¹‹å‰çš„è€æ–¹æ³•ï¼Œå…ˆå¯ç”¨ä¸€ä¸ªä¸´æ—¶æœåŠ¡ï¼ŒæŠŠéœ€è¦çš„æ–‡ä»¶ç›®å½•æ‹·è´åˆ°æœ¬åœ°ç›®å½•ï¼Œè¿™é‡Œåªéœ€è¦ `conf` å’Œ `objs`ï¼Œåé¢æœ‰æ—¶é—´äº†å†ç ”ç©¶çœ‹çœ‹ï¼Œç©¶ç«Ÿæ˜¯å“ªä¸€æ­¥å“ªä¸ªä¸œè¥¿å¯¼è‡´ä¸èƒ½æ­£å¸¸æŒ‚è½½çš„ã€‚

- è¦ **ä¿è¯ LOCAL_SRS_PATH å­˜åœ¨**ï¼Œæ›¿æ¢æˆä½ è‡ªå·±çš„ç›®å½•ä½ç½®å³å¯ã€‚
- æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ­¤å‘½ä»¤åœ¨æ‹·è´å®Œæˆä¼šè‡ªåŠ¨åœæ­¢å¹¶åˆ é™¤æ‰è¿™ä¸ªä¸´æ—¶å®¹å™¨ï¼Œå‡ºç°å¼‚å¸¸æ—¶éœ€è¦æ‰‹åŠ¨åˆ é™¤æ­¤å®¹å™¨æœåŠ¡ã€‚

```shell
LOCAL_SRS_PATH=/Users/feng/codebase/study-pro/billd-z-class/srs
docker run -d --rm --name temp-container registry.cn-hangzhou.aliyuncs.com/ossrs/srs:5 \
&& docker cp temp-container:/usr/local/srs/objs $LOCAL_SRS_PATH/objs \
&& docker cp temp-container:/usr/local/srs/conf $LOCAL_SRS_PATH/conf \
&& docker stop temp-container
```

> æœ‰äº†å¯åŠ¨é…ç½®æ–‡ä»¶ï¼Œå†æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åº”è¯¥å°±æ²¡é—®é¢˜äº†ã€‚

```shell
LOCAL_SRS_PATH=/Users/feng/codebase/study-pro/billd-z-class/srs
CANDIDATE="192.168.1.3"
docker run -d \
--name billd-live-class-srs \
--env CANDIDATE=$CANDIDATE \
-p 8080:8080 -p 1935:1935 -p 1985:1985 -p 8000:8000/udp \
-v $LOCAL_SRS_PATH/conf:/usr/local/srs/conf \
-v $LOCAL_SRS_PATH/objs:/usr/local/srs/objs \
registry.cn-hangzhou.aliyuncs.com/ossrs/srs:5 \
./objs/srs -c conf/rtc2rtmp.conf
```

## MySql - Docker

[Mac App Store Navicat Premium 16.1.0 åŠåç»­ç‰ˆæœ¬æ¿€æ´»](https://github.com/LiJunYi2/navicat-keygen-16V/issues/17) - å…ˆåœ¨ App Store ä¸‹è½½ Navicat ä½†åˆ«æ‰“å¼€ï¼Œä¸‹è½½æ‰§è¡Œ Navicat Crack.dmgï¼Œç­‰æˆåŠŸæ¿€æ´»ä¹‹åå†æ‰“å¼€ä» App Store ä¸‹è½½çš„ Navicatã€‚

### æ‹‰é•œåƒ

```shell
docker pull mysql:8.0
```

### å¯åŠ¨æœåŠ¡

æˆ‘ä»¬éœ€è¦ä»å®¹å™¨å†…æ˜ å°„ä¸¤ä¸ªä¸œè¥¿åˆ°æœ¬åœ°ç£ç›˜ï¼š

1. å¯åŠ¨é…ç½®æ–‡ä»¶ `my.cnf`ï¼Œå®¹å™¨å†…é»˜è®¤æŒ‰ç…§æ­¤è·¯å¾„é¡ºåºå¯»æ‰¾å¯åŠ¨ï¼š`/etc/my.cnf`ã€`/etc/mysql/my.cnf`ã€`/usr/etc/my.cnf`ã€`~/.my.cnf`ï¼Œä¸€èˆ¬è¿™ä¸ªæ–‡ä»¶éƒ½åœ¨ `/etc/my.cnf`ï¼Œå› ä¸ºæˆ‘ä»¬åæœŸå¯èƒ½éœ€è¦ä¿®æ”¹é…ç½®å¯åŠ¨ï¼Œæ‰€ä»¥æ˜ å°„å‡ºæ¥ï¼Œæ–¹ä¾¿æ›´æ–°å’Œä¿å­˜é…ç½®ã€‚
2. æ•°æ®ç›®å½• `/var/lib/mysql`ï¼Œä½ çš„æ•°æ®åº“ä¿¡æ¯éƒ½åœ¨è¿™é‡Œé¢ï¼Œåé¢å°±ç®—å®¹å™¨åˆ æ‰äº†ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ¥æ¢å¤ã€‚

#### æ‹·è´é…ç½®æ–‡ä»¶

> [!todo] è¿˜æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ `-v` æŠŠ `my.cnf` ä»å®¹å™¨å†…æŒ‚è½½å‡ºæ¥ï¼Œæ‰€ä»¥è¿˜æ˜¯å…ˆç”¨ä¸´æ—¶å®¹å™¨æ‹·ä¸€ä»½å‡ºæ¥å§ ğŸ¤¡ã€‚

- ä¿è¯æœ¬åœ° **å­˜åœ¨ $mysqlPath/conf è¿™ä¸ªç›®å½•**ï¼Œå¦åˆ™ä¼šæ‹·è´å¤±è´¥æˆ–å¼‚å¸¸ã€‚
- æˆ‘åœ¨è¿™é‡Œè¸©äº†ä¸ªå°å‘ï¼Œä¸èƒ½ç”¨ `path` å‘½åè®¾ç½®ä¸´æ—¶ç›®å½•å˜é‡å•Šï¼ï¼ï¼è¿™ TM ç³»ç»Ÿå˜é‡ï¼Œå„ç§è½¯ä»¶çš„ç³»ç»Ÿé…ç½®å’Œå¯åŠ¨æ–‡ä»¶éƒ½è¿½åŠ åœ¨è¿™ä¸ªå˜é‡ä¸Šé¢ï¼Œè®¾ç½®ä¸´æ—¶å˜é‡ç›¸å½“äºç›´æ¥è¦†ç›–æ‰ç³»ç»Ÿå˜é‡äº†ï¼Œé‚£ docker å‘½ä»¤ä¹Ÿå°±æ²¡äº†ï¼Œå¿…é¡»é‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æˆ–è€…æŠŠåŸæ¥çš„ç›®å½•æ–‡ä»¶åœ°å€è®¾ç½®å›å»ã€‚
- æ‰€ä»¥è®¾ç½®ä¸´æ—¶å˜é‡å‰å¯ä»¥å…ˆç”¨ `echo $xxx` æ¥æ£€æŸ¥ä¸€ä¸‹è¿™ä¸ªå˜é‡æ˜¯å¦å­˜åœ¨ã€‚

![](https://cdn.jsdelivr.net/gh/fengstats/blogcdn@main/2023/Mac%20path%20%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F.png)

```shell
mysqlPath=/Users/feng/codebase/study-pro/billd-z-class/mysql
docker run -d --rm --name temp mysql:8.0 \
&& docker cp temp:/etc/my.cnf $mysqlPath/conf \
&& docker stop temp
```

#### å†æ¬¡å¯åŠ¨

> å¦‚æœå‡ºç°å¯åŠ¨æˆåŠŸåï¼Œæµ‹è¯•è¿æ¥å¤±è´¥çš„æƒ…å†µå¯ä»¥è¯•è¯•æ·»åŠ  `-e MYSQL_ROOT_HOST=%`ï¼Œä¸Šæ¬¡æ˜¯åŠ äº†è¿™ä¸ªæ‰è¡Œçš„ï¼Œè¿™æ¬¡æ²¡æœ‰ä¹Ÿå¯ä»¥äº†ï¼Œæ‰€ä»¥æœ‰ç‚¹å¥‡æ€ªã€‚

```shell
LOCAL_MYSQL_PATH=/Users/feng/codebase/study-pro/billd-z-class/mysql
docker run -d \
-p 3306:3306 \
--name billd-live-mysql \
-e MYSQL_ROOT_PASSWORD=mysql123. \
-v $LOCAL_MYSQL_PATH/conf/my.cnf:/etc/my.cnf \
-v $LOCAL_MYSQL_PATH/data:/var/lib/mysql \
mysql:8.0
```
