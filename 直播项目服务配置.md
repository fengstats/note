## Docker Hub 镜像加速配置

- [国内教育机构与各大云服务商提供的镜像加速服务](https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6) - 推荐海交大镜像站，网速还行的情况下，拉取 mysql:8.0 镜像只用了 31s，大约 600MB 左右，不行的话再试试其他的。

```json
  "registry-mirrors": [
    "https://docker.mirrors.sjtug.sjtu.edu.cn"
  ]
```

## FFmpeg - Homebrew

一个完整的跨平台解决方案，用于录制、转换和流式传输音频和视频，功能超级强大。

> 直接用 Homebrew 装，遇到问题解决问题，肯定是能装下来的。

```shell
brew install ffmpeg
```

## SRS - Docker

### 拉镜像

```shell
docker pull registry.cn-hangzhou.aliyuncs.com/ossrs/srs:5
```

### 启动服务

`$(ifconfig en0 inet | grep 'inet ' | awk '{print $2}')`: 这个命令可以获取本地网络 IP 地址，`en0` 一般是网络连接（WIFI），`en6` 一般是网线连接，在下面的 `CANDIDATE` 就先写死了，这个参数后面连接 WebRTC 时有用，需要改成你自己的 IP 地址。

[8080](http://localhost:8080/) 是 Web 端口，可以直接访问查看。

#### Docker Volume Driver

本质上是 Docker Host 文件系统里面的目录或文件，不是外部磁盘，容器可以直接读写 Volume 中的数据，即使使用它的容器被销毁，Volume 中数据也会被保存。

`./objs/srs -c conf/rtc2rtmp.conf`: 这是在 Docker 容器内容执行的命令，对应目录位置是 `/usr/local/srs`，所以这才是真正的选择配置文件启动 SRS 服务。

```shell
CANDIDATE="192.168.1.3"
docker run -d \
--name billd-live-class-srs \
--env CANDIDATE=$CANDIDATE \
-p 8080:8080 -p 1935:1935 -p 1985:1985 -p 8000:8000/udp \
-v srs_conf:/usr/local/srs/conf \
-v srs_objs:/usr/local/srs/objs \
registry.cn-hangzhou.aliyuncs.com/ossrs/srs:5 \
./objs/srs -c conf/rtc2rtmp.conf
```

#### 本地磁盘目录挂载

TODO: 搞了蛮久一直有问题，暂时还是用之前的老方法，先启用一个临时服务，把需要的文件目录拷贝到本地目录，这里只需要 `conf` 和 `objs`，后面有时间了再研究看看，究竟是哪一步哪个东西导致不能正常挂载的。

- 注意要保证 `LOCAL_SRS_PATH` 存在，否则无法拷贝。
- 正常情况下，此命令在拷贝完成会自动停止并删除掉这个临时容器，出现异常时需要手动删除此容器服务。

```shell
LOCAL_SRS_PATH=/Users/feng/codebase/study-pro/billd-z-class/srs
docker run -d --rm --name temp-container registry.cn-hangzhou.aliyuncs.com/ossrs/srs:5 \
&& docker cp temp-container:/usr/local/srs/objs $LOCAL_SRS_PATH/objs \
&& docker cp temp-container:/usr/local/srs/conf $LOCAL_SRS_PATH/conf \
&& docker stop temp-container
```

- 有了启动文件和配置目录之后，再执行下面的命令应该就没问题了。

```shell
LOCAL_SRS_PATH=/Users/feng/codebase/study-pro/billd-z-class/srs
CANDIDATE="192.168.1.3"
docker run -d \
--name billd-live-class-srs \
--env CANDIDATE=$CANDIDATE \
-p 8080:8080 -p 1935:1935 -p 1985:1985 -p 8000:8000/udp \
-v $LOCAL_SRS_PATH/conf:/usr/local/srs/conf \
-v $LOCAL_SRS_PATH/objs:/usr/local/srs/objs \
registry.cn-hangzhou.aliyuncs.com/ossrs/srs:5 \
./objs/srs -c conf/rtc2rtmp.conf
```

## MySql - Docker

- [Mac App Store Navicat Premium 16.1.0 及后续版本激活](https://github.com/LiJunYi2/navicat-keygen-16V/issues/17) - 先在 App Store 下载 Navicat 但别打开，下载执行 Navicat Crack.dmg，等成功激活之后再打开从 App Store 下载的 Navicat。

### 拉镜像

```shell
docker pull mysql:8.0
```

### 启动服务



```shell
LOCAL_MYSQL_PATH=/Users/feng/codebase/study-pro/billd-z-class/mysql
docker run -d \
-p 3306:3306 \
--name billd-live-mysql \
-e MYSQL_ROOT_PASSWORD=mysql123. \
-v $LOCAL_MYSQL_PATH/conf/my.cnf:/etc/my.cnf \
-v $LOCAL_MYSQL_PATH/data:/var/lib/mysql \
mysql:8.0
```

-v mysql_cnf:/etc/my.cnf \
