## 前言

[代码地址](https://github.com/fengstats/config/blob/main/3-js/note-stats.js)

2023-05-20 花了两天时间也算是写完了，当然还有很多不足之处，代码就是一坨……但能用就行啦，后续肯定会慢慢优化的！🥰（继续堆屎。

⚠️ 提一嘴，脚本和思路作为参考就好啦~ **不推荐使用**，毕竟太过个人定制化，大概率不适合你，除非你直接同步我的日记记录方式…

> 在源文件上所生成的 Record 统计

![](https://cdn.jsdelivr.net/gh/fengstats/blogcdn@main/2023/%E6%97%A5%E8%AE%B0%E6%97%B6%E9%95%BF%E5%88%86%E6%9E%90%E8%84%9A%E6%9C%AC%20Record.png)

> uTools 内输出

![](https://cdn.jsdelivr.net/gh/fengstats/blogcdn@main/2023/%E6%97%A5%E8%AE%B0%E6%97%B6%E9%95%BF%E7%BB%9F%E8%AE%A1%E8%84%9A%E6%9C%AC%20uTools.png)

其他部分涉及到隐私任务就先不展示了，其实就是在一个大标题下的任务列表后面加上加粗的时间，格式为：**1h**、**1h10min**、**10min** 这三种，同时我还支持在一个任务列表后面写多个时间，也会把帮你计算入内，不过只会统计已完成的任务列表数据，如下：

- [x] 任务 1 **1h**
- [x] 任务 2 **30min**
- [x] 任务 3 **1h30min**
- [x] 任务 4 **1h** + **30min**
- [x] 任务 5 **1h** / **30min**
- [ ] 未勾选完成的任务列表时间不会被统计入内 **1h**

## 原因

> [!todo] 后续再补充吧，这是直接从日记里抽取出来的

目前自测了一些自定义数据，按照格式来执行脚本应该没什么大问题，用于单个文件使用，后续再优化

简单聊聊为啥写这个脚本，因为「 Record 」部分统计时长数据是各个标题下各个任务耗时汇总计算出来的，这件事情在我手动的情况下每次大概需要 10min 左右，当然这还是快的情况下，来看看我统计总时长的步骤：

一：首先看标题，比如「 重要的事 」，再看单任务后面记录的时间，手动一个个加起来，比如：50+15+10+25+45…，一些随意的假数据，若全都是分钟还好可以直接加，但遇到小时单位就稍微麻烦点了，需要先脑内换算一下分钟，比如 2h35min 等于 155min

二：加完之后是总分钟，写到「 Record 」的数据是小时 + 分钟的形式，所以又需要重新换算，嗯，就是这么麻烦

三：接着继续第二个标题下，重复第一步的操作，以此类推到所有标题数据统计结束

四：把刚刚统计的时间变成总时长，睡眠时长也要，一般是不会记录总分钟形式，通常都是小时 + 分钟，所以这里肯定要先手动来转一下，至于其他标题汇总时长，如果刚刚保留了总分钟还好，把总分钟都加起来，最后再转换成小时 + 分钟就完事了，没有的话…，那就再转换一遍吧

最主要的是什么呢，这件事情交给人来做，总有时候会算错，呜呜呜，有几次发现自己统计的时候漏掉了或者加错了，我认为让计算机来做是最合适的，不过之前太懒虽然加了 TodoList 但一直没挑出来做，所以今天稍微写下

> 任务拆解

1) 读取文件内容；
2) 根据标题分类解析出需要参与计算的时间；
3) 生成 Record 写入文件。
